(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(19),o=n.n(r),s=(n(29),n(30),n(4)),a=n(1),i=Object(c.createContext)();function j(e){var t=e.children,n=Object(c.useState)(null),r=Object(s.a)(n,2),o=r[0],j=r[1];return Object(c.useEffect)((function(){fetch("/me").then((function(e){e.ok&&e.json().then((function(e){return j(e)}))}))}),[]),Object(a.jsx)(i.Provider,{value:{user:o,setUser:j},children:t})}var u=function(e){var t=e.children;return Object(a.jsx)("p",{className:"errors",children:t})};var l=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),j=Object(s.a)(o,2),l=j[0],d=j[1],b=Object(c.useState)([]),O=Object(s.a)(b,2),h=O[0],f=O[1],p=Object(c.useState)(!1),x=Object(s.a)(p,2),m=x[0],v=x[1],g=Object(c.useContext)(i).setUser;return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),v(!0),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:l})}).then((function(e){v(!1),e.ok?e.json().then((function(e){return g(e)})):e.json().then((function(e){return f(e.errors)}))}))},children:[Object(a.jsxs)("label",{children:["Username",Object(a.jsx)("input",{name:"username",type:"text",autoComplete:"off",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(a.jsxs)("label",{children:["Password",Object(a.jsx)("input",{name:"password",type:"password",autoComplete:"off",value:l,onChange:function(e){return d(e.target.value)}})]}),Object(a.jsx)("button",{className:"blue-btn",type:"submit",children:m?"Loading...":"Login"}),h.map((function(e){return Object(a.jsx)(u,{children:e},e)}))]})},d=n(8),b=n(10);var O=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(!1),j=Object(s.a)(o,2),l=j[0],O=j[1],h=Object(c.useContext)(i).setUser,f=Object(c.useState)({username:"",password:"",passwordConfirmation:""}),p=Object(s.a)(f,2),x=p[0],m=p[1],v=x.username,g=x.password,C=x.passwordConfirmation;function N(e){m(Object(b.a)(Object(b.a)({},x),{},Object(d.a)({},e.target.name,e.target.value)))}return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r([]),O(!0),fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:v,password:g,password_confirmation:C})}).then((function(e){O(!1),e.ok?e.json().then((function(e){return h(e)})):e.json().then((function(e){return r(e.errors)}))}))},children:[Object(a.jsxs)("label",{children:["Username",Object(a.jsx)("input",{name:"username",type:"text",autoComplete:"off",value:v,onChange:N})]}),Object(a.jsxs)("label",{children:["Password",Object(a.jsx)("input",{name:"password",type:"password",autoComplete:"off",value:g,onChange:N})]}),Object(a.jsxs)("label",{children:["Password Confirmation",Object(a.jsx)("input",{name:"passwordConfirmation",type:"password",autoComplete:"off",value:C,onChange:N})]}),Object(a.jsx)("button",{className:"blue-btn",type:"submit",children:l?"Loading...":"Sign Up"}),Object(a.jsx)("div",{className:"errors-div",children:n.map((function(e){return Object(a.jsx)(u,{children:e},e)}))})]})};var h=function(){var e=Object(c.useState)(!0),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)("div",{className:"wrapper",children:[Object(a.jsx)("h1",{children:"ACFM Pesticide Inventory"}),n?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(l,{}),Object(a.jsxs)("p",{children:["Don't have an account? \xa0",Object(a.jsx)("button",{className:"blue-btn",onClick:function(){return r(!1)},children:"Sign Up"})]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(O,{}),Object(a.jsxs)("p",{children:["Already have an account? \xa0",Object(a.jsx)("button",{className:"blue-btn",onClick:function(){return r(!0)},children:"Log In"})]})]})]})},f=n(3),p=n(9);var x=function(){var e=Object(f.o)(),t=Object(c.useContext)(i).setUser;return Object(a.jsxs)("nav",{id:"navbar",children:[Object(a.jsx)(p.c,{to:"/",children:Object(a.jsx)("img",{className:"logo-img",src:"/assets/acfm-logo.svg",alt:"logo"})}),Object(a.jsx)(p.c,{to:"/",children:Object(a.jsx)("h2",{className:"logo",children:"ACFM Pesticide Inventory"})}),Object(a.jsx)(p.c,{className:"nav-btn",to:"/",children:"Inventory"}),Object(a.jsx)(p.c,{className:"nav-btn",to:"/products",children:"Products"}),Object(a.jsx)(p.c,{onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(n){n.ok&&(t(null),e("/"))}))},className:"nav-btn",to:"/",children:"Logout"})]})},m=n(6),v=Object(c.createContext)();function g(e){var t=e.children,n=Object(c.useState)([]),r=Object(s.a)(n,2),o=r[0],i=r[1],j=Object(c.useState)(!0),u=Object(s.a)(j,2),l=u[0],d=u[1];return Object(c.useEffect)((function(){fetch("/products").then((function(e){if(e.ok)return e.json();throw new Error("Failed to fetch products")})).then((function(e){i(e),d(!1)})).catch((function(e){console.error("Error fetching products:",e),d(!1)}))}),[]),l?Object(a.jsx)("div",{}):Object(a.jsx)(v.Provider,{value:{products:o,setProducts:i},children:t})}var C=function(){var e=Object(c.useContext)(v),t=e.products,n=e.setProducts,r=Object(c.useState)(!1),o=Object(s.a)(r,2),i=o[0],j=o[1],u=Object(c.useState)(""),l=Object(s.a)(u,2),d=l[0],b=l[1],O=Object(c.useState)(""),h=Object(s.a)(O,2),f=h[0],x=h[1];if(!t)return Object(a.jsx)("div",{});var g=t.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)(p.b,{to:"/products/".concat(e.id),children:e.name})}),Object(a.jsx)("td",{children:e.epa_reg})]},e.id)}));return Object(a.jsxs)("div",{className:"table-container",children:[Object(a.jsxs)("div",{className:"center margin-3em",children:[Object(a.jsx)("button",{onClick:function(){j(!i)},className:"blue-btn",children:i?"Cancel":"Add a Product"}),Object(a.jsx)("div",{children:i?Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:d,epa_reg:f};fetch("/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Failed to add product");return e.json()})).then((function(e){n((function(t){return[].concat(Object(m.a)(t),[e])})),b(""),x(""),j(!1)})).catch((function(e){console.error("Error adding product:",e)}))},children:[Object(a.jsxs)("label",{children:["Product Name",Object(a.jsx)("input",{type:"text",value:d,onChange:function(e){b(e.target.value)}})]}),Object(a.jsxs)("label",{children:["EPA Reg #",Object(a.jsx)("input",{type:"text",value:f,onChange:function(e){x(e.target.value)}})]}),Object(a.jsx)("button",{type:"submit",className:"blue-btn",children:"Submit Product"})]}):null})]}),Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{className:"table-header-row",children:[Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"EPA Reg #"})]})}),Object(a.jsx)("tbody",{children:g})]})]})};var N=function(){var e=Object(c.useContext)(i),t=e.user,n=e.setUser,r=Object(c.useContext)(v).products,o=Object(c.useState)(!1),j=Object(s.a)(o,2),u=j[0],l=j[1],d=Object(c.useState)(1),O=Object(s.a)(d,2),h=O[0],f=O[1],x=Object(c.useState)("A"),g=Object(s.a)(x,2),C=g[0],N=g[1],S=Object(c.useState)([{product_id:"",concentration:""}]),y=Object(s.a)(S,2),w=y[0],E=y[1],P=Object(c.useState)(!0),k=Object(s.a)(P,2),_=k[0],F=k[1],A=Object(c.useState)(""),T=Object(s.a)(A,2),I=T[0],D=T[1];if(Object(c.useEffect)((function(){t&&t.containers&&F(!1)}),[t]),_)return Object(a.jsx)("p",{children:"Loading..."});var L=function(e,t){var n=t.target,c=n.name,r=n.value,o=Object(m.a)(w);o[e][c]=r,E(o)},U=(I?t.containers.filter((function(e){return e.contents.some((function(e){return e.product_id===parseInt(I)}))})):t.containers).slice().sort((function(e,t){return e.shelf!==t.shelf?e.shelf-t.shelf:e.row.localeCompare(t.row)})).map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)(p.c,{to:"/containers/".concat(e.id),className:"navlink",children:e.shelf})}),Object(a.jsx)("td",{children:Object(a.jsx)(p.c,{to:"/containers/".concat(e.id),className:"navlink",children:e.row})}),e.contents.map((function(t,n){var c;return Object(a.jsx)("td",{children:Object(a.jsxs)(p.c,{to:"/containers/".concat(e.id),className:"navlink",children:[t.concentration,"%"," ",null===(c=r.find((function(e){return e.id===t.product_id})))||void 0===c?void 0:c.name]})},n)}))]},e.id)}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"center margin-3em",children:[Object(a.jsx)("button",{onClick:function(){l(!u)},className:"blue-btn",children:u?"Cancel":"Add a Container"}),Object(a.jsx)("div",{children:u?Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={user_id:t.id,shelf:h,row:C,contents_attributes:w};fetch("/containers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({container:c})}).then((function(e){if(!e.ok)throw new Error("Failed to add container");return e.json()})).then((function(e){n((function(t){return Object(b.a)(Object(b.a)({},t),{},{containers:[].concat(Object(m.a)(t.containers),[e])})})),f(1),N("A"),E([{product_id:"",concentration:""}]),l(!1)})).catch((function(e){console.error("Error adding container:",e)}))},children:[Object(a.jsxs)("div",{className:"flex-column",children:[Object(a.jsxs)("label",{className:"flex-row",children:["Shelf:",Object(a.jsx)("select",{value:h,onChange:function(e){f(parseInt(e.target.value))},required:!0,children:Object(m.a)(Array(10).keys()).map((function(e){return Object(a.jsx)("option",{value:e+1,children:e+1},e+1)}))})]}),Object(a.jsxs)("label",{className:"flex-row",children:["Row:",Object(a.jsx)("select",{value:C,onChange:function(e){N(e.target.value)},required:!0,children:["A","B","C","D","E"].map((function(e){return Object(a.jsx)("option",{value:e,children:e},e)}))})]}),w.map((function(e,t){return Object(a.jsxs)("div",{className:"flex-row",children:[Object(a.jsxs)("select",{value:e.product_id,onChange:function(e){return L(t,e)},name:"product_id",required:!0,children:[Object(a.jsx)("option",{value:"",children:"Select a product"}),r.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(a.jsx)("label",{children:Object(a.jsx)("input",{type:"number",placeholder:"Concentration",value:e.concentration,onChange:function(e){return L(t,e)},name:"concentration",required:!0})}),Object(a.jsx)("button",{className:"grey-button",type:"button",onClick:function(){return function(e){var t=Object(m.a)(w);t.splice(e,1),E(t)}(t)},children:"Remove"})]},t)})),Object(a.jsx)("button",{className:"grey-button margin-top-small",type:"button",onClick:function(){E([].concat(Object(m.a)(w),[{product_id:"",concentration:""}]))},children:"Add More Contents"})]}),Object(a.jsx)("button",{type:"submit",className:"blue-btn margin-top",children:"Submit Container"})]}):null})]}),Object(a.jsx)("div",{className:"filter-container",children:Object(a.jsxs)("label",{children:["Filter by Product",Object(a.jsxs)("select",{value:I,onChange:function(e){D(e.target.value)},className:"select",children:[Object(a.jsx)("option",{value:"",children:"All Products"}),r.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]})}),Object(a.jsxs)("table",{className:"inventory-table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Shelf"}),Object(a.jsx)("th",{children:"Row"}),Object(a.jsx)("th",{colSpan:r.length+1,children:"Contents"})]})}),Object(a.jsx)("tbody",{children:U})]})]})};var S=function(){var e=Object(f.o)(),t=Object(f.q)().id;t=parseInt(t);var n=Object(c.useContext)(v),r=n.products,o=n.setProducts,s=r.find((function(e){return e.id===parseInt(t)}));return s?Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("div",{className:"product",children:[Object(a.jsx)("h1",{children:s.name}),Object(a.jsxs)("p",{children:["EPA Reg: ",s.epa_reg]}),Object(a.jsxs)("div",{className:"product-options",children:[Object(a.jsx)("button",{className:"blue-btn button-width",children:Object(a.jsx)(p.b,{to:"/products/".concat(t,"/edit"),children:"Edit"})}),Object(a.jsx)("button",{className:"remove-btn button-width",onClick:function(){fetch("/products/".concat(t),{method:"DELETE"}).then((function(e){if(!e.ok)throw new Error("Failed to delete product");return 204===e.status?{}:e.json()})).then((function(){var n=r.filter((function(e){return e.id!==t}));o(n),e("/products")})).catch((function(e){console.error("Error deleting product:",e)}))},children:"Remove"})]})]})}):Object(a.jsx)("p",{children:"Product not found"})};var y=function(){var e=Object(f.o)(),t=Object(f.q)().id;t=parseInt(t);var n=Object(c.useContext)(v),r=n.products,o=n.setProducts,i=r.find((function(e){return e.id===parseInt(t)})),j=Object(c.useState)(i.name),u=Object(s.a)(j,2),l=u[0],d=u[1],O=Object(c.useState)(i.epa_reg),h=Object(s.a)(O,2),p=h[0],x=h[1];return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{onSubmit:function(n){n.preventDefault();var c=Object(b.a)(Object(b.a)({},i),{},{name:l,epa_reg:p});fetch("/products/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){if(!e.ok)throw new Error("Failed to update product");return e.json()})).then((function(t){var n=r.map((function(e){return e.id===c.id?c:e}));o(n),e("/products")})).catch((function(e){console.error("Error updating product:",e)}))},children:[Object(a.jsxs)("label",{children:["Name",Object(a.jsx)("input",{type:"text",value:l,onChange:function(e){d(e.target.value)}})]}),Object(a.jsxs)("label",{children:["EPA Reg",Object(a.jsx)("input",{type:"text",value:p,onChange:function(e){x(e.target.value)}})]}),Object(a.jsx)("button",{type:"submit",className:"blue-btn",children:"Submit"})]})})};var w=function(){var e=Object(f.o)(),t=Object(f.q)().id;t=parseInt(t);var n=Object(c.useContext)(i),r=n.user,o=n.setUser,s=Object(c.useContext)(v).products,j=r.containers.find((function(e){return e.id===t}));return j?Object(a.jsxs)("div",{children:[Object(a.jsxs)("table",{className:"inventory-table margin-top-4em",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Shelf"}),Object(a.jsx)("th",{children:"Row"}),Object(a.jsx)("th",{colSpan:s.length+1,children:"Contents"})]})}),Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:j.shelf}),Object(a.jsx)("td",{children:j.row}),j.contents.map((function(e,t){var n;return Object(a.jsxs)("td",{children:[e.concentration,"% ","",null===(n=s.find((function(t){return t.id===e.product_id})))||void 0===n?void 0:n.name]},t)}))]})})]}),Object(a.jsxs)("div",{className:"product-options",children:[Object(a.jsx)("button",{className:"blue-btn",children:Object(a.jsx)(p.b,{to:"/containers/".concat(t,"/edit"),children:"Edit"})}),Object(a.jsx)("button",{className:"remove-btn",onClick:function(){fetch("/containers/".concat(t),{method:"DELETE"}).then((function(e){if(!e.ok)throw new Error("Failed to delete product");return 204===e.status?{}:e.json()})).then((function(){var n=r.containers.filter((function(e){return e.id!==t}));o(Object(b.a)(Object(b.a)({},r),{},{containers:n})),e("/")})).catch((function(e){console.error("Error deleting product:",e)}))},children:"Remove"})]})]}):Object(a.jsx)("p",{children:"Loading..."})};var E=function(){var e=Object(f.o)(),t=Object(f.q)().id;t=parseInt(t);var n=Object(c.useContext)(i),r=n.user,o=n.setUser,j=Object(c.useContext)(v).products,u=r.containers.find((function(e){return e.id===t})),l=Object(c.useState)((null===u||void 0===u?void 0:u.shelf)||""),d=Object(s.a)(l,2),O=d[0],h=d[1],p=Object(c.useState)((null===u||void 0===u?void 0:u.row)||""),x=Object(s.a)(p,2),g=x[0],C=x[1],N=Object(c.useState)((null===u||void 0===u?void 0:u.contents)||[]),S=Object(s.a)(N,2),y=S[0],w=S[1];function E(e,t,n){var c=Object(m.a)(y);c[e][t]=n,w(c)}return Object(c.useEffect)((function(){u&&(h(u.shelf),C(u.row),w(u.contents))}),[u]),u?Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{onSubmit:function(n){n.preventDefault();var c={id:u.id,shelf:O,row:g,contents_attributes:y};fetch("/containers/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({container:c})}).then((function(e){if(!e.ok)throw new Error("Failed to update container");return e.json()})).then((function(n){var c=r.containers.map((function(e){return e.id===t?n:e}));o(Object(b.a)(Object(b.a)({},r),{},{containers:c})),e("/")})).catch((function(e){console.error("Error updating container:",e)}))},children:[Object(a.jsxs)("label",{children:["Shelf",Object(a.jsx)("select",{value:O,onChange:function(e){h(e.target.value)},children:Object(m.a)(Array(10).keys()).map((function(e){return Object(a.jsx)("option",{value:e+1,children:e+1},e+1)}))})]}),Object(a.jsxs)("label",{children:["Row",Object(a.jsx)("select",{value:g,onChange:function(e){C(e.target.value)},children:["A","B","C","D","E"].map((function(e){return Object(a.jsx)("option",{value:e,children:e},e)}))})]}),y.map((function(e,t){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("label",{children:["Product",Object(a.jsx)("select",{value:e.product_id,onChange:function(e){return E(t,"product_id",parseInt(e.target.value))},children:j.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name},e.id)}))})]}),Object(a.jsxs)("label",{children:["Concentration",Object(a.jsx)("input",{type:"number",value:e.concentration,onChange:function(e){return E(t,"concentration",parseInt(e.target.value))}})]})]},t)})),Object(a.jsx)("button",{type:"submit",className:"blue-btn",children:"Submit"})]})}):Object(a.jsx)("p",{children:"Loading..."})};var P=function(){return Object(c.useContext)(i).user?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("header",{className:"header",children:Object(a.jsx)(x,{})}),Object(a.jsx)("main",{children:Object(a.jsxs)(f.c,{children:[Object(a.jsx)(f.a,{path:"/",element:Object(a.jsx)(N,{})}),Object(a.jsx)(f.a,{path:"/products",element:Object(a.jsx)(C,{})}),Object(a.jsx)(f.a,{path:"/products/:id",element:Object(a.jsx)(S,{})}),Object(a.jsx)(f.a,{path:"/products/:id/edit",element:Object(a.jsx)(y,{})}),Object(a.jsx)(f.a,{path:"/containers/:id",element:Object(a.jsx)(w,{})}),Object(a.jsx)(f.a,{path:"/containers/:id/edit",element:Object(a.jsx)(E,{})})]})})]}):Object(a.jsx)(h,{})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),o(e),s(e)}))};o.a.render(Object(a.jsx)(p.a,{children:Object(a.jsx)(j,{children:Object(a.jsx)(g,{children:Object(a.jsx)(P,{})})})}),document.getElementById("root")),k()}},[[33,1,2]]]);
//# sourceMappingURL=main.5c2b6915.chunk.js.map